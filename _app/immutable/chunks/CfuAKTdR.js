import{D as R,o as N,A as ae,G as U,p as re,n as ne,Q as F,W as te,B as ie,H as se,C as G,F as b,z as x,a3 as le,a4 as fe,w as L,J as ue,I as de,a5 as V,i as oe,a6 as ve,a7 as B,a8 as ce,K as q,L as _e,a9 as he,aa as k,y as z,ab as pe,ac as we,ad as me,ae as Ee,af as ge,ag as Se,T as Te}from"./F8s3VB4g.js";import{w as Q}from"./Cp2kpGwn.js";function De(a,r){return r}function Ae(a,r,e){for(var i=a.items,d=[],o=r.length,u=0;u<o;u++)Ee(r[u].e,d,!0);var h=o>0&&d.length===0&&e!==null;if(h){var m=e.parentNode;ge(m),m.append(e),i.clear(),T(a,r[0].prev,r[o-1].next)}Se(d,()=>{for(var _=0;_<o;_++){var w=r[_];h||(i.delete(w.k),T(a,w.prev,w.next)),z(w.e,!h)}})}function Ce(a,r,e,i,d,o=null){var u=a,h={flags:r,items:new Map,first:null};{var m=a;u=N?R(ae(m)):m.appendChild(U())}N&&re();var _=null,w=!1,I=new Map,n=te(()=>{var l=e();return oe(l)?l:l==null?[]:V(l)}),c,t;function s(){He(t,c,h,I,u,d,r,i,e),o!==null&&(c.length===0?_?q(_):_=L(()=>o(u)):_!==null&&_e(_,()=>{_=null}))}ne(()=>{t??=Te,c=F(n);var l=c.length;if(w&&l===0)return;w=l===0;let H=!1;if(N){var g=ie(u)===se;g!==(l===0)&&(u=G(),R(u),b(!1),H=!0)}if(N){for(var f=null,p,v=0;v<l;v++){if(x.nodeType===le&&x.data===fe){u=x,H=!0,b(!1);break}var A=c[v],S=i(A,v);p=J(x,h,f,null,A,S,v,d,r,e),h.items.set(S,p),f=p}l>0&&R(G())}if(N)l===0&&o&&(_=L(()=>o(u)));else if(ue()){var y=new Set,E=de;for(v=0;v<l;v+=1){A=c[v],S=i(A,v);var O=h.items.get(S)??I.get(S);O?W(O,A,v):(p=J(null,h,null,null,A,S,v,d,r,e,!0),I.set(S,p)),y.add(S)}for(const[D,C]of h.items)y.has(D)||E.skipped_effects.add(C.e);E.add_callback(s)}else s();H&&b(!0),F(n)}),N&&(u=x)}function He(a,r,e,i,d,o,u,h,m){var _=r.length,w=e.items,I=e.first,n=I,c,t=null,s=[],l=[],H,g,f,p;for(p=0;p<_;p+=1){if(H=r[p],g=h(H,p),f=w.get(g),f===void 0){var v=i.get(g);if(v!==void 0){i.delete(g),w.set(g,v);var A=t?t.next:n;T(e,t,v),T(e,v,A),M(v,A,d),t=v}else{var S=n?n.e.nodes_start:d;t=J(S,e,t,t===null?e.first:t.next,H,g,p,o,u,m)}w.set(g,t),s=[],l=[],n=t.next;continue}if(W(f,H,p),(f.e.f&k)!==0&&q(f.e),f!==n){if(c!==void 0&&c.has(f)){if(s.length<l.length){var y=l[0],E;t=y.prev;var O=s[0],D=s[s.length-1];for(E=0;E<s.length;E+=1)M(s[E],y,d);for(E=0;E<l.length;E+=1)c.delete(l[E]);T(e,O.prev,D.next),T(e,t,O),T(e,D,y),n=y,t=D,p-=1,s=[],l=[]}else c.delete(f),M(f,n,d),T(e,f.prev,f.next),T(e,f,t===null?e.first:t.next),T(e,t,f),t=f;continue}for(s=[],l=[];n!==null&&n.k!==g;)(n.e.f&k)===0&&(c??=new Set).add(n),l.push(n),n=n.next;if(n===null)continue;f=n}s.push(f),t=f,n=f.next}if(n!==null||c!==void 0){for(var C=c===void 0?[]:V(c);n!==null;)(n.e.f&k)===0&&C.push(n),n=n.next;var $=C.length;if($>0){var j=_===0?d:null;Ae(e,C,j)}}a.first=e.first&&e.first.e,a.last=t&&t.e;for(var ee of i.values())z(ee.e);i.clear()}function W(a,r,e,i){ce(a.v,r),a.i=e}function J(a,r,e,i,d,o,u,h,m,_,w){var I=(m&pe)!==0,n=(m&we)===0,c=I?n?ve(d,!1,!1):B(d):d,t=(m&he)===0?u:B(u),s={i:t,v:c,k:o,a:null,e:null,prev:e,next:i};try{if(a===null){var l=document.createDocumentFragment();l.append(a=U())}return s.e=L(()=>h(a,c,t,_),N),s.e.prev=e&&e.e,s.e.next=i&&i.e,e===null?w||(r.first=s):(e.next=s,e.e.next=s.e),i!==null&&(i.prev=s,i.e.prev=s.e),s}finally{}}function M(a,r,e){for(var i=a.next?a.next.e.nodes_start:e,d=r?r.e.nodes_start:e,o=a.e.nodes_start;o!==null&&o!==i;){var u=me(o);d.before(o),o=u}}function T(a,r,e){r===null?a.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}const X="haiku_draft",K="saved_haikus";function Ie(a,r,e){if(typeof window<"u"){const i=JSON.stringify({line1:a,line2:r,line3:e});localStorage.setItem(X,i)}}function ye(){if(typeof window<"u"){const a=localStorage.getItem(X);if(a)return JSON.parse(a)}return{line1:"",line2:"",line3:""}}const P=Q(ye());P.subscribe(a=>{Ie(a.line1,a.line2,a.line3)});function Y(){if(typeof window<"u"){const a=localStorage.getItem(K);if(a)return JSON.parse(a)}return[]}function xe(a){if(typeof window<"u"){const r=Y();r.push(a),localStorage.setItem(K,JSON.stringify(r)),Z.set(r)}}function Re(a){if(typeof window<"u"){let r=Y();r=r.filter(e=>e.id!==a),localStorage.setItem(K,JSON.stringify(r)),Z.set(r)}}function be(a){typeof window<"u"&&P.set({line1:a.line1,line2:a.line2,line3:a.line3})}const Z=Q(Y());export{xe as a,Re as d,Ce as e,P as h,De as i,be as l,Z as s};
